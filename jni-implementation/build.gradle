plugins {
    id 'cpp-library'
}

def javaHome = System.getProperty("java.home")

library {
    source.from 'src/main/cpp', '../jni-bindings/build/generated/sources/headers/java/main', "../external/llama.cpp/llama.h"
    publicHeaders.from '../jni-bindings/build/generated/sources/headers/java/main', "$javaHome/include", "$javaHome/include/linux", "$javaHome/include/win32", "$javaHome/include/darwin"
}

tasks.withType(CppCompile) {
    dependsOn ':jni-bindings:compileJava'
}